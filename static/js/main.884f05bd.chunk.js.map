{"version":3,"sources":["redux/reducer/Book.js","redux/reducer/Genre.js","redux/configStore.js","components/Stars.js","components/Book/ListBook.js","components/Checkout/Checkout.js","components/Header/Header.js","components/Search/Search.js","hooks/useActions.js","BookStore.js","hooks/useBookStore.js","index.js","api/DataService.js","api/endPoints.js","redux/epic/index.js","redux/epic/Book.js","redux/epic/Genre.js","redux/actionTypes.js","redux/index.js","redux/action/Genre.js","redux/action/Book.js"],"names":["initialState","books","loading","fetched","error","genres","genre","state","action","type","types","FETCH_GENRE_REQUEST","FETCH_GENRE_SUCCESS","payload","FETCH_GENRE_ERROR","reducers","combineReducers","book","FETCH_BOOK_REQUEST","FETCH_BOOK_SUCCESS","FETCH_BOOK_ERROR","epicMiddleware","createEpicMiddleware","ConfigureStore","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","run","rootEpics","Starts","props","stars","className","ListBook","addBook","useSelector","map","key","code","alt","name","src","author","price","onClick","Checkout","basket","setCheckout","removeBook","useState","total","setTotal","useEffect","value","length","forEach","b","parseFloat","qty","Math","round","index","find","g","alert","Header","basketCounter","checkout","href","Search","genreSelected","setGenreSelected","filter","setFilter","dispatch","useDispatch","fetchBookAction","data","fetchBook","fetchGenreAction","fetchGenre","useActions","id","onChange","event","target","parseInt","size","e","placeholder","BookStore","initial","setBasket","setBasketCounter","bookFound","prev","concat","useBookStore","ReactDOM","render","document","getElementById","axiosObs","Axios","create","baseURL","headers","DataService","request","endPoint","body","rOptions","url","pipe","timeout","retry","Object","freeze","endPoints","combineEpics","action$","ofType","mergeMap","delay","sort","a","toLowerCase","includes","catchError","of","ADD_BOOK_REQUEST","ADD_BOOK_SUCCESS","REMOVE_BOOK_REQUEST","REMOVE_BOOK_SUCCESS","PURCHASE_BOOK_REQUEST","PURCHASE_BOOK_SUCCESS","CLEAN_BASKET_REQUEST","CLEAN_BASKET_SUCCESS"],"mappings":"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","file":"static/js/main.884f05bd.chunk.js","sourcesContent":["import { types } from '../actionTypes';\n\n// initial state of Genre.\nconst initialState = {\n  books: [],\n  loading: false,\n  fetched: false,\n  error: null,\n};\n\nexport const book = (state = initialState, action) => {\n  switch (action.type) {\n    case types.FETCH_BOOK_REQUEST:\n      return {\n        ...state,\n        loading: true\n      };\n    case types.FETCH_BOOK_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        fetched: true,\n        books: action.payload,\n      };\n    case types.FETCH_BOOK_ERROR:\n      return {\n        ...state,\n        loading: false,\n        fetched: false,\n        error: action.payload\n      };\n    default:\n      return state;\n  }\n};","import { types } from '../actionTypes';\n\n// initial state of Genre.\nconst initialState = {\n  genres: [],\n  loading: false,\n  fetched: false,\n  error: null,\n};\n\nconst genre = (state = initialState, action) => {\n  switch (action.type) {\n    case types.FETCH_GENRE_REQUEST:\n      return {\n        ...state,\n        loading: true\n      };\n    case types.FETCH_GENRE_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        fetched: true,\n        genres: action.payload,\n      };\n    case types.FETCH_GENRE_ERROR:\n      return {\n        ...state,\n        loading: false,\n        fetched: false,\n        error: action.payload\n      };\n    default:\n      return state;\n  }\n};\n\nexport default genre;","import { createEpicMiddleware } from 'redux-observable';\nimport { applyMiddleware, combineReducers, compose, createStore } from 'redux';\n\nimport { rootEpics } from './epic';\n\nimport { book } from './reducer/Book';\nimport genre from './reducer/Genre';\n\nconst reducers = combineReducers({\n  book,\n  genre\n});\n\nconst epicMiddleware = createEpicMiddleware();\n\nconst ConfigureStore = () => {\n  const composeEnhancers = (typeof window !== 'undefined' &&\n      window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\n  \n  const store = createStore(\n      reducers,\n      {},\n      composeEnhancers(applyMiddleware(epicMiddleware))\n  );\n  epicMiddleware.run(rootEpics);\n  return store;\n};\n\nexport default ConfigureStore;\n","import React from 'react';\n\nexport const Starts = props => {\n  let {stars} = props;\n  return (\n      <div className=\"stars\">\n        <span className={`fa fa-star ${stars > 0 ? 'checked' : ''}`}></span>\n        <span className={`fa fa-star ${stars-- && stars > 0 ? 'checked' : ''}`}></span>\n        <span className={`fa fa-star ${stars-- && stars > 0 ? 'checked' : ''}`}></span>\n        <span className={`fa fa-star ${stars-- && stars > 0 ? 'checked' : ''}`}></span>\n        <span className={`fa fa-star ${stars-- && stars > 0 ? 'checked' : ''}`}></span>\n      </div>\n  );\n}","import React from 'react';\n\nimport { useSelector } from 'react-redux';\nimport { Starts } from '../Stars';\n\nexport const ListBook = props => {\n  const {addBook} = props;\n  const {books, loading, error} = useSelector(state => state.book);\n  \n  return (\n      <div className=\"books-list\">\n        {\n          error\n              ? error\n              : loading\n              ? <div className=\"loader\"/>\n              : books && books.map(book => {\n                return (\n                    <div key={book.code} className=\"book-list-item\">\n                      <img  alt={book.name} src={`images/books/${book.code}.png`}/>\n                      <div className=\"book-summary\">\n                        <span>{book.author}</span>\n                        <span>${book.price}</span>\n                        <Starts stars={book.stars}/>\n                        <button className=\"buy-button\"\n                                onClick={() => addBook(book)}\n                        >\n                          <span className=\"fa fa-shopping-cart\"/>\n                          buy\n                        </button>\n                      </div>\n                    </div>)\n              })\n        }\n      </div>\n  );\n};\n\n","import React, { useEffect, useState } from 'react';\n\nimport { useSelector } from 'react-redux';\nimport { Starts } from '../Stars';\n\nexport const Checkout = props => {\n  const {basket, setCheckout, removeBook} = props;\n  const [total, setTotal] = useState(0)\n  const {genres} = useSelector(state => state.genre);\n  \n  useEffect(() => {\n    let value = 0.0;\n    if (basket && basket.length > 0) {\n      basket.forEach(b => {\n        value += (parseFloat(b.price) * b.qty);\n      });\n      if (value) {\n        setTotal(Math.round(value * 100) / 100);\n      }\n    } else {\n      setTotal(value);\n      setCheckout(false);\n    }\n  },[basket.length]);\n  \n  const getGenreName = genre => {\n    return genres.find(g => g.code === genre).genre;\n  }\n  \n  return (\n      <div className=\"checkout-book-list\">\n        <h3>Checkout!</h3>\n        {basket.map((book,index) => {\n          return (\n              <div key={index} className=\"checkout-book-item\">\n                <img className=\"checkout-book-img\" alt={book.name} src={`images/books/${book.code}.png`}/>\n                <div className=\"checkout-book-details\">\n                  <span className=\"checkout-book-name\">{book.name}</span>\n                  <span className=\"checkout-book-author\">{book.author}</span>\n                  <span className=\"checkout-book-genre\">{getGenreName(book.genre)}</span>\n                </div>\n                <Starts stars={book.stars}/>\n                <span className=\"checkout-book-qty\">{book.qty}</span>\n                <span className=\"checkout-book-price\">${book.price}</span>\n                <a onClick={() => removeBook(book)}>\n                  <i className=\"fas fa-trash-alt basket-icon\"/>\n                </a>\n              </div>\n          )\n        })}\n        <div className=\"checkout-book-item\">\n          <button className=\"checkout-button\" onClick={() => setCheckout(false)}>\n            <span className=\"fa fa-shopping-cart\"/>buy more\n          </button>\n          <button className=\"checkout-button\" onClick={() => alert('Congrats!!ðŸ¤“ðŸ‘')}>\n            <span className=\"fa fa-credit-card\"/>Pay Now\n          </button>\n          <span className=\"checkout-total\">${total}</span>\n        </div>\n      </div>\n  );\n};","import React from 'react';\n\nexport const Header = props => {\n  const {basket, basketCounter, checkout, setCheckout, removeBook} = props;\n  return (\n      <div className=\"title\">\n        <img className=\"title-book-svg\" alt=\"books\" src=\"images/book.svg\"/>\n        <h3>Search, Find and Buy your book here!</h3>\n        {\n          !checkout &&\n          <span className=\"fa-layers fa-fw basket dropdown\">\n                            <i className=\"fas fa-shopping-basket\"></i>\n                            <span className=\"fa-layers-counter basket-counter\">{basketCounter}</span>\n            {\n              basket.length > 0 &&\n              (\n                  <div className=\"dropdown-content\">\n                    {basket.map((book, index) => {\n                      return (\n                          <div className=\"basket-item\" key={index}>\n                            <span className=\"basket-book\">{book.name}</span>\n                            <span className=\"basket-qty\">{book.qty}</span>\n                            <a href=\"#\" onClick={() => removeBook(book)}>\n                              <i className=\"fas fa-trash-alt basket-icon\"/>\n                            </a>\n                          </div>\n                      )\n                    })}\n                    <button className=\"pay-now\" onClick={() => setCheckout(true)}>\n                      <i className=\"fas fa-credit-card pay-now-icon\"/>\n                      Pay now\n                    </button>\n                  </div>\n              )\n            }\n          </span>\n        }\n      </div>\n  \n  );\n};","import React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useActions } from '../../hooks';\n\nexport const Search = props => {\n  const [genreSelected, setGenreSelected] = useState();\n  const [filter, setFilter] = useState('');\n  const {fetchGenreAction, fetchBookAction} = useActions();\n  const {genres, loading, fetched, error} = useSelector(state => state.genre);\n  \n  useEffect(() => {\n    if (!genres || genres.length === 0) {\n      fetchGenreAction();\n    }\n  }, []);\n  \n  const searchBooks = () => {\n    const body = {\n      genre: genreSelected,\n      filter: filter\n    };\n    fetchBookAction(body)\n  }\n  \n  const selectGenre = event => {\n    if (event.target.value) {\n      const genre = parseInt(event.target.value);\n      setGenreSelected(genre);\n      const body = {\n        genre: genre,\n        filter: filter\n      };\n      fetchBookAction(body);\n    }\n  };\n  \n  return (\n      <div className=\"search\">\n        {\n          error\n              ? error\n              : loading || !fetched\n              ? 'Loading..'\n              : (\n                  <select id=\"genre\" className=\"genre-select\"\n                          onChange={selectGenre}>\n                    <option value={0}>All genres</option>\n                    {\n                      genres &&\n                      genres.map(g => {\n                        return (<option key={g.code} value={g.code}>{g.genre}</option>)\n                      })\n                    }\n                  </select>\n              )\n        }\n        <input id=\"books\" size=\"20\" onChange={e => setFilter(e.target.value)}\n               className=\"search-input\"\n               placeholder=\"Books, Author, Title.\"/>\n        <button className=\"search-button\" onClick={() => searchBooks()}>\n          <i className=\"fas fa-book\"/>\n          Search\n        </button>\n      </div>\n  );\n};","import { useDispatch } from 'react-redux';\nimport { fetchGenre, fetchBook } from '../redux'\n\nexport const useActions = () => {\n  const dispatch = useDispatch();\n  \n  const fetchBookAction = data => dispatch(fetchBook(data));\n  const fetchGenreAction = () => dispatch(fetchGenre());\n  \n  return {\n    fetchBookAction,\n    fetchGenreAction\n  }\n};","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport './BookStore.css';\n\nimport { Search, ListBook, Checkout, Header } from './components';\nimport { useBookStore } from './hooks';\n\nconst BookStore = () => {\n  const {\n    checkout,\n    basket,\n    basketCounter,\n    setCheckout,\n    removeBook,\n    addBook\n  } = useBookStore();\n  \n  const {loading} = useSelector(state => state.genre);\n  \n  return (\n      <div className=\"container\">\n        <Header basket={basket}\n                checkout={checkout}\n                setCheckout={setCheckout}\n                basketCounter={basketCounter}\n                removeBook={removeBook}\n        />\n        {\n          loading ? <div className=\"loader\"/>\n              : checkout ? <Checkout removeBook={removeBook} basket={basket} setCheckout={setCheckout}/>\n              : <>\n                <Search/>\n                <ListBook addBook={addBook}/>\n              </>\n        }\n      \n      </div>\n  );\n}\n\nexport default BookStore;\n","import { useState } from 'react';\n\nexport const useBookStore = initial => {\n  const [basket, setBasket] = useState([]);\n  const [basketCounter, setBasketCounter] = useState(0);\n  const [checkout, setCheckout] = useState(false);\n  \n  const addBook = book => {\n    const bookFound = basket.find(b => b.code === book.code);\n    bookFound\n        ? bookFound.qty += 1\n        : setBasket(prev => prev.concat({...book, qty: 1}));\n    setBasketCounter(prev => prev + 1);\n  };\n  \n  const removeBook = book => {\n    if (book.qty === 1) {\n      setBasket(prev => prev.filter(b => b.code !== book.code));\n    }\n    book.qty -= 1;\n    setBasketCounter(prev => prev - 1);\n  }\n  \n  return {\n    basket,\n    basketCounter,\n    checkout,\n    setCheckout,\n    addBook,\n    removeBook\n  }\n}","import React, { StrictMode } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport ConfigureStore from './redux/configStore';\nimport BookStore from './BookStore';\n\nconst store = ConfigureStore();\n\nReactDOM.render(\n    <StrictMode>\n      <Provider store={store}>\n        <BookStore/>\n      </Provider>\n    </StrictMode>\n    , document.getElementById('root')\n);\n\n","import Axios from 'axios-observable';\nimport { timeout, retry } from 'rxjs/operators';\n\nconst axiosObs = Axios.create({\n  baseURL: 'api/',\n  headers: {'Content-Type': 'application/json;charset=utf-8'}\n});\n\nconst DataService = {\n  request: (endPoint, body) => {\n    const rOptions = {url: endPoint};\n    rOptions.data = body ? rOptions.data : body;\n    \n    return axiosObs.request(rOptions).pipe(\n        timeout(3000), // after 3s abort\n        retry(2), // retry 2x.\n    );\n  }\n};\n\nObject.freeze(DataService);\nexport default DataService;\n","\nexport const endPoints = {\n  GENRE: 'genres.json',\n  BOOK: 'books.json'\n}","import { combineEpics } from 'redux-observable';\n\nimport { fetchBookEpic } from './Book';\nimport { fetchGenreEpic } from './Genre';\n\nexport const rootEpics = combineEpics(fetchBookEpic, fetchGenreEpic);","import { ofType } from 'redux-observable';\nimport { delay, map, mergeMap, catchError } from 'rxjs/operators';\nimport { of } from 'rxjs';\n\nimport { types } from '../actionTypes'\nimport { DataService, endPoints } from '../../api';\n\nexport const fetchBookEpic = action$ => action$.pipe(\n    ofType(types.FETCH_BOOK_REQUEST),\n    mergeMap(({payload}) => {\n      return DataService.request(endPoints.BOOK).pipe(\n          delay(1000),\n          map(({data}) => {\n            const {genre, filter} = payload;\n            let books = data.books.sort((a, b) => a.name < b.name ? -1 : 1);\n            if (genre) {\n              books = books.filter(b => b.genre === genre);\n            }\n            if (filter) {\n              books = books.filter(b => {\n                return b.name.toLowerCase().includes(filter.toLowerCase()) ||\n                    b.author.toLowerCase().includes(filter.toLowerCase());\n              });\n            }\n            return {type: types.FETCH_BOOK_SUCCESS, payload: books};\n          }),\n          catchError(() => of({\n                type: types.FETCH_BOOK_ERROR,\n                payload: 'Something went wrong!! ðŸ™ˆðŸ‘€ðŸ˜…',\n                error: true\n              })\n          ),\n      );\n    }),\n);","import { ofType } from 'redux-observable';\nimport { map, mergeMap, catchError, delay } from 'rxjs/operators';\nimport { of } from 'rxjs';\n\nimport { types } from '../actionTypes'\nimport { DataService, endPoints } from '../../api';\n\nexport const fetchGenreEpic = action$ => action$.pipe(\n    ofType(types.FETCH_GENRE_REQUEST),\n    mergeMap(() => {\n      return DataService.request(endPoints.GENRE).pipe(\n          delay(1000),\n          map(({data}) => {\n            return {\n              type: types.FETCH_GENRE_SUCCESS, payload: data.genres\n            };\n          }),\n          catchError(() => of({\n                type: types.FETCH_GENRE_ERROR,\n                payload: 'Something went wrong!! ðŸ™ˆðŸ‘€ðŸ˜…',\n                error: true\n              })\n          ),\n      );\n    }),\n);","// action types\nexport const types = {\n  // HTTP  calls\n  FETCH_GENRE_REQUEST: 'FETCH_GENRE_REQUEST',\n  FETCH_GENRE_SUCCESS: 'FETCH_GENRE_SUCCESS',\n  FETCH_GENRE_ERROR: 'FETCH_GENRE_ERROR',\n  \n  FETCH_BOOK_REQUEST: 'FETCH_BOOK_REQUEST',\n  FETCH_BOOK_SUCCESS: 'FETCH_BOOK_SUCCESS',\n  FETCH_BOOK_ERROR: 'FETCH_BOOK_ERROR',\n  \n  // internal process only.\n  ADD_BOOK_REQUEST: 'ADD_BOOK_REQUEST',\n  ADD_BOOK_SUCCESS: 'ADD_BOOK_SUCCESS',\n  \n  REMOVE_BOOK_REQUEST: 'REMOVE_BOOK_REQUEST',\n  REMOVE_BOOK_SUCCESS: 'REMOVE_BOOK_SUCCESS',\n  \n  PURCHASE_BOOK_REQUEST: 'PURCHASE_BOOK_REQUEST',\n  PURCHASE_BOOK_SUCCESS: 'PURCHASE_BOOK_SUCCESS',\n  \n  CLEAN_BASKET_REQUEST: 'CLEAN_BASKET_REQUEST',\n  CLEAN_BASKET_SUCCESS: 'CLEAN_BASKET_SUCCESS'\n};","export * from './action';\nexport * from './epic';\nexport * from './reducer';","import { types } from '../actionTypes';\n// action to fetch a list of genre.\nexport const fetchGenre = () => ({type: types.FETCH_GENRE_REQUEST});\n","import { types } from '../actionTypes';\n\nexport const fetchBook = data => ({type: types.FETCH_BOOK_REQUEST, payload: data});"],"sourceRoot":""}