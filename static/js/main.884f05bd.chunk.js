(this["webpackJsonpreact-book-store"]=this["webpackJsonpreact-book-store"]||[]).push([[0],{111:function(e,t,a){},112:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(46),o=a.n(r),s=a(19),u=a(118),l=a(35),E=a(49),i=a(25),m=a(6),f={books:[],loading:!1,fetched:!1,error:null},b={genres:[],loading:!1,fetched:!1,error:null},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.a.FETCH_GENRE_REQUEST:return Object(i.a)({},e,{loading:!0});case m.a.FETCH_GENRE_SUCCESS:return Object(i.a)({},e,{loading:!1,fetched:!0,genres:t.payload});case m.a.FETCH_GENRE_ERROR:return Object(i.a)({},e,{loading:!1,fetched:!1,error:t.payload});default:return e}},d=Object(l.c)({book:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.a.FETCH_BOOK_REQUEST:return Object(i.a)({},e,{loading:!0});case m.a.FETCH_BOOK_SUCCESS:return Object(i.a)({},e,{loading:!1,fetched:!0,books:t.payload});case m.a.FETCH_BOOK_ERROR:return Object(i.a)({},e,{loading:!1,fetched:!1,error:t.payload});default:return e}},genre:O}),k=Object(u.a)(),C=function(){var e="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,t=Object(l.e)(d,{},e(Object(l.a)(k)));return k.run(E.a),t},_=(a(111),function(e){var t=e.stars;return c.a.createElement("div",{className:"stars"},c.a.createElement("span",{className:"fa fa-star ".concat(t>0?"checked":"")}),c.a.createElement("span",{className:"fa fa-star ".concat(t--&&t>0?"checked":"")}),c.a.createElement("span",{className:"fa fa-star ".concat(t--&&t>0?"checked":"")}),c.a.createElement("span",{className:"fa fa-star ".concat(t--&&t>0?"checked":"")}),c.a.createElement("span",{className:"fa fa-star ".concat(t--&&t>0?"checked":"")}))}),S=function(e){var t=e.addBook,a=Object(s.c)((function(e){return e.book})),n=a.books,r=a.loading,o=a.error;return c.a.createElement("div",{className:"books-list"},o||(r?c.a.createElement("div",{className:"loader"}):n&&n.map((function(e){return c.a.createElement("div",{key:e.code,className:"book-list-item"},c.a.createElement("img",{alt:e.name,src:"images/books/".concat(e.code,".png")}),c.a.createElement("div",{className:"book-summary"},c.a.createElement("span",null,e.author),c.a.createElement("span",null,"$",e.price),c.a.createElement(_,{stars:e.stars}),c.a.createElement("button",{className:"buy-button",onClick:function(){return t(e)}},c.a.createElement("span",{className:"fa fa-shopping-cart"}),"buy")))}))))},p=a(29),h=function(e){var t=e.basket,a=e.setCheckout,r=e.removeBook,o=Object(n.useState)(0),u=Object(p.a)(o,2),l=u[0],E=u[1],i=Object(s.c)((function(e){return e.genre})).genres;Object(n.useEffect)((function(){var e=0;t&&t.length>0?(t.forEach((function(t){e+=parseFloat(t.price)*t.qty})),e&&E(Math.round(100*e)/100)):(E(e),a(!1))}),[t.length]);return c.a.createElement("div",{className:"checkout-book-list"},c.a.createElement("h3",null,"Checkout!"),t.map((function(e,t){return c.a.createElement("div",{key:t,className:"checkout-book-item"},c.a.createElement("img",{className:"checkout-book-img",alt:e.name,src:"images/books/".concat(e.code,".png")}),c.a.createElement("div",{className:"checkout-book-details"},c.a.createElement("span",{className:"checkout-book-name"},e.name),c.a.createElement("span",{className:"checkout-book-author"},e.author),c.a.createElement("span",{className:"checkout-book-genre"},(a=e.genre,i.find((function(e){return e.code===a})).genre))),c.a.createElement(_,{stars:e.stars}),c.a.createElement("span",{className:"checkout-book-qty"},e.qty),c.a.createElement("span",{className:"checkout-book-price"},"$",e.price),c.a.createElement("a",{onClick:function(){return r(e)}},c.a.createElement("i",{className:"fas fa-trash-alt basket-icon"})));var a})),c.a.createElement("div",{className:"checkout-book-item"},c.a.createElement("button",{className:"checkout-button",onClick:function(){return a(!1)}},c.a.createElement("span",{className:"fa fa-shopping-cart"}),"buy more"),c.a.createElement("button",{className:"checkout-button",onClick:function(){return alert("Congrats!!\ud83e\udd13\ud83d\udc4f")}},c.a.createElement("span",{className:"fa fa-credit-card"}),"Pay Now"),c.a.createElement("span",{className:"checkout-total"},"$",l)))},g=function(e){var t=e.basket,a=e.basketCounter,n=e.checkout,r=e.setCheckout,o=e.removeBook;return c.a.createElement("div",{className:"title"},c.a.createElement("img",{className:"title-book-svg",alt:"books",src:"images/book.svg"}),c.a.createElement("h3",null,"Search, Find and Buy your book here!"),!n&&c.a.createElement("span",{className:"fa-layers fa-fw basket dropdown"},c.a.createElement("i",{className:"fas fa-shopping-basket"}),c.a.createElement("span",{className:"fa-layers-counter basket-counter"},a),t.length>0&&c.a.createElement("div",{className:"dropdown-content"},t.map((function(e,t){return c.a.createElement("div",{className:"basket-item",key:t},c.a.createElement("span",{className:"basket-book"},e.name),c.a.createElement("span",{className:"basket-qty"},e.qty),c.a.createElement("a",{href:"#",onClick:function(){return o(e)}},c.a.createElement("i",{className:"fas fa-trash-alt basket-icon"})))})),c.a.createElement("button",{className:"pay-now",onClick:function(){return r(!0)}},c.a.createElement("i",{className:"fas fa-credit-card pay-now-icon"}),"Pay now"))))},N=a(64),R=function(e){var t=Object(n.useState)(),a=Object(p.a)(t,2),r=a[0],o=a[1],u=Object(n.useState)(""),l=Object(p.a)(u,2),E=l[0],i=l[1],m=function(){var e=Object(s.b)();return{fetchBookAction:function(t){return e(Object(N.fetchBook)(t))},fetchGenreAction:function(){return e(Object(N.fetchGenre)())}}}(),f=m.fetchGenreAction,b=m.fetchBookAction,O=Object(s.c)((function(e){return e.genre})),d=O.genres,k=O.loading,C=O.fetched,_=O.error;Object(n.useEffect)((function(){d&&0!==d.length||f()}),[]);return c.a.createElement("div",{className:"search"},_||(k||!C?"Loading..":c.a.createElement("select",{id:"genre",className:"genre-select",onChange:function(e){if(e.target.value){var t=parseInt(e.target.value);o(t),b({genre:t,filter:E})}}},c.a.createElement("option",{value:0},"All genres"),d&&d.map((function(e){return c.a.createElement("option",{key:e.code,value:e.code},e.genre)})))),c.a.createElement("input",{id:"books",size:"20",onChange:function(e){return i(e.target.value)},className:"search-input",placeholder:"Books, Author, Title."}),c.a.createElement("button",{className:"search-button",onClick:function(){b({genre:r,filter:E})}},c.a.createElement("i",{className:"fas fa-book"}),"Search"))},v=function(){var e=function(e){var t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(0),s=Object(p.a)(o,2),u=s[0],l=s[1],E=Object(n.useState)(!1),m=Object(p.a)(E,2),f=m[0],b=m[1];return{basket:c,basketCounter:u,checkout:f,setCheckout:b,addBook:function(e){var t=c.find((function(t){return t.code===e.code}));t?t.qty+=1:r((function(t){return t.concat(Object(i.a)({},e,{qty:1}))})),l((function(e){return e+1}))},removeBook:function(e){1===e.qty&&r((function(t){return t.filter((function(t){return t.code!==e.code}))})),e.qty-=1,l((function(e){return e-1}))}}}(),t=e.checkout,a=e.basket,r=e.basketCounter,o=e.setCheckout,u=e.removeBook,l=e.addBook,E=Object(s.c)((function(e){return e.genre})).loading;return c.a.createElement("div",{className:"container"},c.a.createElement(g,{basket:a,checkout:t,setCheckout:o,basketCounter:r,removeBook:u}),E?c.a.createElement("div",{className:"loader"}):t?c.a.createElement(h,{removeBook:u,basket:a,setCheckout:o}):c.a.createElement(c.a.Fragment,null,c.a.createElement(R,null),c.a.createElement(S,{addBook:l})))},T=C();o.a.render(c.a.createElement(n.StrictMode,null,c.a.createElement(s.a,{store:T},c.a.createElement(v,null))),document.getElementById("root"))},49:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n=a(117),c=a(81),r=a(80),o=a(115),s=a(16),u=a(116),l=a(36),E=a(6),i=a(78),m=a.n(i),f=a(119),b=a(114),O=m.a.create({baseURL:"api/",headers:{"Content-Type":"application/json;charset=utf-8"}}),d={request:function(e,t){var a={url:e};return a.data=t?a.data:t,O.request(a).pipe(Object(f.a)(3e3),Object(b.a)(2))}};Object.freeze(d);var k=d,C="genres.json",_="books.json",S=Object(n.a)((function(e){return e.pipe(Object(c.a)(E.a.FETCH_BOOK_REQUEST),Object(r.a)((function(e){var t=e.payload;return k.request(_).pipe(Object(o.a)(1e3),Object(s.a)((function(e){var a=e.data,n=t.genre,c=t.filter,r=a.books.sort((function(e,t){return e.name<t.name?-1:1}));return n&&(r=r.filter((function(e){return e.genre===n}))),c&&(r=r.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())||e.author.toLowerCase().includes(c.toLowerCase())}))),{type:E.a.FETCH_BOOK_SUCCESS,payload:r}})),Object(u.a)((function(){return Object(l.a)({type:E.a.FETCH_BOOK_ERROR,payload:"Something went wrong!! \ud83d\ude48\ud83d\udc40\ud83d\ude05",error:!0})})))})))}),(function(e){return e.pipe(Object(c.a)(E.a.FETCH_GENRE_REQUEST),Object(r.a)((function(){return k.request(C).pipe(Object(o.a)(1e3),Object(s.a)((function(e){var t=e.data;return{type:E.a.FETCH_GENRE_SUCCESS,payload:t.genres}})),Object(u.a)((function(){return Object(l.a)({type:E.a.FETCH_GENRE_ERROR,payload:"Something went wrong!! \ud83d\ude48\ud83d\udc40\ud83d\ude05",error:!0})})))})))}))},6:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={FETCH_GENRE_REQUEST:"FETCH_GENRE_REQUEST",FETCH_GENRE_SUCCESS:"FETCH_GENRE_SUCCESS",FETCH_GENRE_ERROR:"FETCH_GENRE_ERROR",FETCH_BOOK_REQUEST:"FETCH_BOOK_REQUEST",FETCH_BOOK_SUCCESS:"FETCH_BOOK_SUCCESS",FETCH_BOOK_ERROR:"FETCH_BOOK_ERROR",ADD_BOOK_REQUEST:"ADD_BOOK_REQUEST",ADD_BOOK_SUCCESS:"ADD_BOOK_SUCCESS",REMOVE_BOOK_REQUEST:"REMOVE_BOOK_REQUEST",REMOVE_BOOK_SUCCESS:"REMOVE_BOOK_SUCCESS",PURCHASE_BOOK_REQUEST:"PURCHASE_BOOK_REQUEST",PURCHASE_BOOK_SUCCESS:"PURCHASE_BOOK_SUCCESS",CLEAN_BASKET_REQUEST:"CLEAN_BASKET_REQUEST",CLEAN_BASKET_SUCCESS:"CLEAN_BASKET_SUCCESS"}},64:function(e,t,a){"use strict";var n=a(76);a.d(t,"fetchBook",(function(){return n.a})),a.d(t,"fetchGenre",(function(){return n.b}));a(49),a(75)},75:function(e,t){},76:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return r}));var n=a(6),c=function(){return{type:n.a.FETCH_GENRE_REQUEST}},r=function(e){return{type:n.a.FETCH_BOOK_REQUEST,payload:e}}},82:function(e,t,a){e.exports=a(112)}},[[82,1,2]]]);
//# sourceMappingURL=main.884f05bd.chunk.js.map